2025-10-24 00:55:46,865 - INFO - __main__ 35 - Iniciando programa de optimización con log fechado
2025-10-24 00:55:46,866 - INFO - __main__ 38 - Configuración cargada desde YAML
2025-10-24 00:55:46,866 - INFO - __main__ 39 - STUDY_NAME: TEST 1 - Modelo Final  - Pruebo Normalizacion V2
2025-10-24 00:55:46,866 - INFO - __main__ 40 - DATA_PATH: ../../../data/competencia_03.csv
2025-10-24 00:55:46,866 - INFO - __main__ 41 - SEMILLA: [555557, 555871, 556219, 556459, 556691, 556903, 557159, 557399, 557597, 557861]
2025-10-24 00:55:46,866 - INFO - __main__ 42 - MES_TRAIN: [2021, 202102]
2025-10-24 00:55:46,866 - INFO - __main__ 43 - MESES_OPTIMIZACION: [2021, 202102, 202103, 202104]
2025-10-24 00:55:46,866 - INFO - __main__ 44 - MES_VALIDACION: 202103
2025-10-24 00:55:46,866 - INFO - __main__ 45 - MES_TEST: 202104
2025-10-24 00:55:46,866 - INFO - __main__ 46 - FINAL_TRAIN: [202101, 202102, 202103, 202104]
2025-10-24 00:55:46,866 - INFO - __main__ 47 - FINAL_PREDIC: 202106
2025-10-24 00:55:46,867 - INFO - __main__ 48 - GANANCIA_ACIERTO: 780000
2025-10-24 00:55:46,867 - INFO - __main__ 49 - COSTO_ESTIMULO: 20000
2025-10-24 00:55:46,867 - INFO - __main__ 50 - UMBRAL: 0.015
2025-10-24 00:55:46,867 - INFO - __main__ 51 - HIPERPARAMETROS: {'num_leaves': {'min': 20, 'max': 300, 'type': 'int'}, 'learning_rate': {'min': 0.005, 'max': 0.06, 'type': 'float'}, 'min_data_in_leaf': {'min': 10, 'max': 1000, 'type': 'int'}, 'feature_fraction': {'min': 0.15, 'max': 0.8, 'type': 'float'}, 'bagging_fraction': {'min': 0.15, 'max': 0.8, 'type': 'float'}, 'num_boost_round': {'min': 300, 'max': 1200, 'type': 'int'}}
2025-10-24 00:55:46,867 - INFO - __main__ 57 - === INICIANDO OPTIMIZACIÓN CON CONFIGURACIÓN YAML ===
2025-10-24 00:55:48,708 - INFO - __main__ 60 - ✅ df_fe.csv encontrado
2025-10-24 01:09:24,498 - INFO - __main__ 178 - ⏳ CSV cargado o creado, ahora ejecutando optimización...
2025-10-24 01:09:25,176 - INFO - __main__ 197 - === EVALUACIÓN EN CONJUNTO DE TEST ===
2025-10-24 01:09:25,179 - INFO - __main__ 244 - === ENTRENAMIENTO FINAL ===
2025-10-24 01:09:25,179 - INFO - __main__ 245 - Preparar datos para entrenamiento final
2025-10-24 01:09:25,232 - INFO - final_training 23 - Preparando datos para entrenamiento final
2025-10-24 01:09:25,255 - INFO - final_training 24 - Períodos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-24 01:09:25,255 - INFO - final_training 25 - Período de predicción: 202106
2025-10-24 01:09:36,249 - INFO - final_training 50 - Features utilizadas: 1914
2025-10-24 01:09:36,388 - INFO - final_training 51 - Distribución del target - 0: 642,840, 1: 7,369
2025-10-24 01:09:36,388 - INFO - __main__ 249 - Entrenar modelo final
2025-10-24 01:09:36,391 - INFO - final_training 67 - Iniciando entrenamiento del modelo final
2025-10-24 01:09:36,400 - INFO - final_training 79 - Parámetros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 555557, 'verbose': -1, 'extra_trees': False, 'num_leaves': 169, 'learning_rate': 0.01653493811854045, 'min_data_in_leaf': 666, 'feature_fraction': 0.22865878320049338, 'bagging_fraction': 0.7317466615048293, 'num_boost_round': 682}
2025-10-24 01:21:21,902 - INFO - __main__ 253 - Generar predicciones finales
2025-10-24 01:21:21,908 - INFO - final_training 159 - Generando predicciones finales
2025-10-24 01:21:29,492 - INFO - final_training 232 - Importancia de las primeras 1000 variables guardada en 'feature_importance/feature_importance_TEST 1 - Modelo Final  - Pruebo Normalizacion V2.csv'
2025-10-24 01:21:29,492 - INFO - final_training 180 - Predicciones con umbral generadas:
2025-10-24 01:21:29,493 - INFO - final_training 181 -   Total clientes: 164,313
2025-10-24 01:21:29,494 - INFO - final_training 182 -   Positivas: 14,507 (8.83%)
2025-10-24 01:21:29,494 - INFO - final_training 183 -   Umbral utilizado: 0.015
2025-10-24 01:21:29,514 - INFO - final_training 189 - Generando predicciones con top_k=11,750
2025-10-24 01:21:29,724 - INFO - final_training 201 -   Predicciones top_k generadas (K=11,750)
2025-10-24 01:21:29,725 - INFO - final_training 202 -   Máxima probabilidad: 0.9736
2025-10-24 01:21:29,725 - INFO - final_training 203 -   Mínima probabilidad dentro del top_k: 0.0207
2025-10-24 01:21:29,725 - INFO - __main__ 257 - Guardar predicciones
2025-10-24 01:21:34,486 - INFO - output_manager 39 - Predicciones (umbral) guardadas en: predict/TEST 1 - Modelo Final  - Pruebo Normalizacion V2_umbral_20251024_012131.csv
2025-10-24 01:21:34,487 - INFO - output_manager 40 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-24 01:21:34,487 - INFO - output_manager 41 -   Registros: 164,313
2025-10-24 01:21:35,379 - INFO - output_manager 42 -   Primeras filas:
   numero_de_cliente  predict
0          -1.015288        0
1          -1.015119        0
2          -1.014842        0
3          -1.014779        0
4          -1.014572        1
2025-10-24 01:21:37,997 - INFO - output_manager 39 - Predicciones (top_k) guardadas en: predict/TEST 1 - Modelo Final  - Pruebo Normalizacion V2_top_k_20251024_012131.csv
2025-10-24 01:21:37,997 - INFO - output_manager 40 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-24 01:21:37,997 - INFO - output_manager 41 -   Registros: 164,313
2025-10-24 01:21:38,003 - INFO - output_manager 42 -   Primeras filas:
        numero_de_cliente  predict
117436          -0.479181        1
8042            -0.558665        1
159575           0.796599        1
9453             0.540935        1
96254            0.461407        1
2025-10-24 01:21:38,003 - INFO - __main__ 261 - === RESUMEN FINAL ===
2025-10-24 01:21:38,003 - INFO - __main__ 262 - Entrenamiento final completado exitosamente
2025-10-24 01:21:38,003 - INFO - __main__ 263 - Mejores hiperparámetros utilizados: {'num_leaves': 169, 'learning_rate': 0.01653493811854045, 'min_data_in_leaf': 666, 'feature_fraction': 0.22865878320049338, 'bagging_fraction': 0.7317466615048293, 'num_boost_round': 682}
2025-10-24 01:21:38,003 - INFO - __main__ 264 - Períodos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-24 01:21:38,003 - INFO - __main__ 265 - Período de predicción: 202106
2025-10-24 01:21:38,005 - INFO - __main__ 266 - Archivo de salida: {'umbral': 'predict/TEST 1 - Modelo Final  - Pruebo Normalizacion V2_umbral_20251024_012131.csv', 'top_k': 'predict/TEST 1 - Modelo Final  - Pruebo Normalizacion V2_top_k_20251024_012131.csv'}
2025-10-24 01:21:38,005 - INFO - __main__ 267 - Log detallado: logs/log_TEST 1 - Modelo Final  - Pruebo Normalizacion V2_2025-10-24_00-55-46.log
2025-10-24 01:21:38,005 - INFO - __main__ 270 - >>> Ejecución finalizada. Revisar logs para mas detalles.
