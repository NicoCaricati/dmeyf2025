2025-10-16 23:11:16,950 - INFO - __main__ 33 - Iniciando programa de optimizaci√≥n con log fechado
2025-10-16 23:11:16,950 - INFO - __main__ 36 - Configuraci√≥n cargada desde YAML
2025-10-16 23:11:16,950 - INFO - __main__ 37 - STUDY_NAME: TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting
2025-10-16 23:11:16,950 - INFO - __main__ 38 - DATA_PATH: ../data/competencia_03.csv
2025-10-16 23:11:16,950 - INFO - __main__ 39 - SEMILLA: [555557, 555871, 556219, 556459, 556691, 556903, 557159, 557399, 557597, 557861]
2025-10-16 23:11:16,950 - INFO - __main__ 40 - MES_TRAIN: [2021, 202102]
2025-10-16 23:11:16,950 - INFO - __main__ 41 - MESES_OPTIMIZACION: [2021, 202102, 202103, 202104]
2025-10-16 23:11:16,950 - INFO - __main__ 42 - MES_VALIDACION: 202103
2025-10-16 23:11:16,950 - INFO - __main__ 43 - MES_TEST: 202104
2025-10-16 23:11:16,950 - INFO - __main__ 44 - FINAL_TRAIN: [202101, 202102, 202103, 202104]
2025-10-16 23:11:16,950 - INFO - __main__ 45 - FINAL_PREDIC: 202106
2025-10-16 23:11:16,950 - INFO - __main__ 46 - GANANCIA_ACIERTO: 780000
2025-10-16 23:11:16,950 - INFO - __main__ 47 - COSTO_ESTIMULO: 20000
2025-10-16 23:11:16,950 - INFO - __main__ 48 - UMBRAL: 0.015
2025-10-16 23:11:16,951 - INFO - __main__ 49 - HIPERPARAMETROS: {'num_leaves': {'min': 20, 'max': 200, 'type': 'int'}, 'learning_rate': {'min': 0.005, 'max': 0.06, 'type': 'float'}, 'min_data_in_leaf': {'min': 300, 'max': 1000, 'type': 'int'}, 'feature_fraction': {'min': 0.15, 'max': 0.6, 'type': 'float'}, 'bagging_fraction': {'min': 0.15, 'max': 0.7, 'type': 'float'}, 'num_boost_round': {'min': 300, 'max': 1200, 'type': 'int'}}
2025-10-16 23:11:16,951 - INFO - __main__ 55 - === INICIANDO OPTIMIZACI√ìN CON CONFIGURACI√ìN YAML ===
2025-10-16 23:11:16,951 - INFO - loader 88 - Cargando dataset desde ../../../datasets/competencia_01_crudo.csv
2025-10-16 23:11:36,722 - INFO - loader 137 - Dataset cargado con 978439 filas y 155 columnas
2025-10-16 23:11:37,250 - INFO - __main__ 62 - Datos cargados: (978439, 155)
2025-10-16 23:11:37,803 - INFO - __name__ 223 - Variables TC_Total generadas. DataFrame resultante con 177 columnas
2025-10-16 23:11:47,969 - INFO - __main__ 147 - Feature Engineering completado: (978439, 211)
2025-10-16 23:11:50,347 - INFO - loader 188 - Conversi√≥n completada:
2025-10-16 23:11:50,347 - INFO - loader 189 -   Mapeo utilizado: CONTINUA -> 0, BAJA+1 -> 1, BAJA+2 -> 1
2025-10-16 23:11:50,347 - INFO - loader 190 -   Original - CONTINUA: 642840, BAJA+1: 3434, BAJA+2: 3935
2025-10-16 23:11:50,347 - INFO - loader 191 -   Binario - 0: 642840, 1: 7369
2025-10-16 23:11:50,348 - INFO - loader 192 -   Distribuci√≥n: 1.13% casos positivos
2025-10-16 23:11:50,370 - INFO - __main__ 191 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:11:50,370 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:11:50,370 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:12:52,934 - INFO - config 520 - === Comparando 10 semillas ===
2025-10-16 23:12:52,935 - INFO - config 527 - üîÅ Semilla: 555557
2025-10-16 23:12:52,935 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:12:52,935 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:13:53,922 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:13:53,961 - INFO - grafico_test 40 - Ganancia m√°xima: 367,860,000 en posici√≥n 9566
2025-10-16 23:13:53,961 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.042396
2025-10-16 23:13:53,961 - INFO - config 527 - üîÅ Semilla: 555871
2025-10-16 23:13:53,962 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:13:53,962 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:14:55,797 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:14:55,810 - INFO - grafico_test 40 - Ganancia m√°xima: 363,400,000 en posici√≥n 11429
2025-10-16 23:14:55,810 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.034269
2025-10-16 23:14:55,810 - INFO - config 527 - üîÅ Semilla: 556219
2025-10-16 23:14:55,810 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:14:55,810 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:15:58,812 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:15:58,823 - INFO - grafico_test 40 - Ganancia m√°xima: 367,420,000 en posici√≥n 7428
2025-10-16 23:15:58,823 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.056764
2025-10-16 23:15:58,824 - INFO - config 527 - üîÅ Semilla: 556459
2025-10-16 23:15:58,824 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:15:58,824 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:16:58,379 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:16:58,391 - INFO - grafico_test 40 - Ganancia m√°xima: 369,040,000 en posici√≥n 10067
2025-10-16 23:16:58,392 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.039859
2025-10-16 23:16:58,392 - INFO - config 527 - üîÅ Semilla: 556691
2025-10-16 23:16:58,392 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:16:58,392 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:18:03,076 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:18:03,087 - INFO - grafico_test 40 - Ganancia m√°xima: 371,720,000 en posici√≥n 8693
2025-10-16 23:18:03,087 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.047567
2025-10-16 23:18:03,087 - INFO - config 527 - üîÅ Semilla: 556903
2025-10-16 23:18:03,088 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:18:03,088 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:19:05,115 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:19:05,128 - INFO - grafico_test 40 - Ganancia m√°xima: 367,860,000 en posici√≥n 8686
2025-10-16 23:19:05,128 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.047702
2025-10-16 23:19:05,128 - INFO - config 527 - üîÅ Semilla: 557159
2025-10-16 23:19:05,128 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:19:05,128 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:20:06,815 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:20:06,830 - INFO - grafico_test 40 - Ganancia m√°xima: 372,980,000 en posici√≥n 9670
2025-10-16 23:20:06,830 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.042085
2025-10-16 23:20:06,831 - INFO - config 527 - üîÅ Semilla: 557399
2025-10-16 23:20:06,831 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:20:06,831 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:21:11,564 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:21:11,577 - INFO - grafico_test 40 - Ganancia m√°xima: 364,020,000 en posici√≥n 9238
2025-10-16 23:21:11,577 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.044384
2025-10-16 23:21:11,578 - INFO - config 527 - üîÅ Semilla: 557597
2025-10-16 23:21:11,578 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:21:11,578 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:22:13,859 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:22:13,871 - INFO - grafico_test 40 - Ganancia m√°xima: 368,380,000 en posici√≥n 9820
2025-10-16 23:22:13,871 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.041355
2025-10-16 23:22:13,871 - INFO - config 527 - üîÅ Semilla: 557861
2025-10-16 23:22:13,871 - INFO - config 29 - === EVALUACI√ìN EN CONJUNTO DE TEST ===
2025-10-16 23:22:13,871 - INFO - config 30 - Per√≠odo de test: 202104
2025-10-16 23:23:11,416 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:23:11,427 - INFO - grafico_test 40 - Ganancia m√°xima: 365,940,000 en posici√≥n 9702
2025-10-16 23:23:11,427 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.041675
2025-10-16 23:23:13,403 - INFO - config 609 - ‚úÖ Gr√°fico comparativo guardado: resultados/plots/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_comparativo_semillas_20251016_232311.png
2025-10-16 23:23:26,360 - INFO - config 104 - Resultados de test guardados en resultados/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_test_results.json
2025-10-16 23:23:26,360 - INFO - __main__ 223 - === RESUMEN DE EVALUACI√ìN EN TEST ===
2025-10-16 23:23:26,360 - INFO - __main__ 224 - ‚úÖ Ganancia en test: 2,147,385,408
2025-10-16 23:23:26,360 - INFO - __main__ 225 - üéØ Predicciones positivas: 20,297 (12.42%)
2025-10-16 23:23:26,361 - INFO - __main__ 228 - === GRAFICO DE TEST ===
2025-10-16 23:23:26,994 - INFO - __main__ 237 - === GRAFICO DE TEST ===
2025-10-16 23:23:26,994 - INFO - grafico_test 58 - Generando gr√°fico de ganancia avanzado...
2025-10-16 23:23:26,994 - INFO - grafico_test 25 - Calculando ganancia acumulada optimizada...
2025-10-16 23:23:27,006 - INFO - grafico_test 40 - Ganancia m√°xima: 367,860,000 en posici√≥n 9566
2025-10-16 23:23:27,006 - INFO - grafico_test 41 - Umbral √≥ptimo: 0.042396
2025-10-16 23:23:29,411 - INFO - grafico_test 149 - Gr√°fico avanzado guardado: resultados/plots/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_ganancia_avanzado_20251016_232327.png
2025-10-16 23:23:29,411 - INFO - grafico_test 150 - Datos guardados: resultados/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_datos_ganancia_20251016_232327.csv
2025-10-16 23:23:29,412 - INFO - __main__ 242 - === ENTRENAMIENTO FINAL ===
2025-10-16 23:23:29,412 - INFO - __main__ 243 - Preparar datos para entrenamiento final
2025-10-16 23:23:29,412 - INFO - final_training 23 - Preparando datos para entrenamiento final
2025-10-16 23:23:29,412 - INFO - final_training 24 - Per√≠odos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-16 23:23:29,412 - INFO - final_training 25 - Per√≠odo de predicci√≥n: 202106
2025-10-16 23:23:30,582 - INFO - final_training 50 - Features utilizadas: 210
2025-10-16 23:23:30,584 - INFO - final_training 51 - Distribuci√≥n del target - 0: 642,840, 1: 7,369
2025-10-16 23:23:30,585 - INFO - __main__ 247 - Entrenar modelo final
2025-10-16 23:23:30,585 - INFO - final_training 67 - Iniciando entrenamiento del modelo final
2025-10-16 23:23:30,585 - INFO - final_training 79 - Par√°metros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 555557, 'verbose': -1, 'extra_trees': False, 'num_leaves': 46, 'learning_rate': 0.016377657023274192, 'min_data_in_leaf': 710, 'feature_fraction': 0.2503218637353462, 'bagging_fraction': 0.2352773905721117, 'num_boost_round': 1000}
2025-10-16 23:26:28,561 - INFO - __main__ 251 - Generar predicciones finales
2025-10-16 23:26:28,562 - INFO - final_training 159 - Generando predicciones finales
2025-10-16 23:26:33,885 - INFO - final_training 232 - Importancia de las primeras 1000 variables guardada en 'feature_importance/feature_importance_TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting.csv'
2025-10-16 23:26:33,886 - INFO - final_training 180 - Predicciones con umbral generadas:
2025-10-16 23:26:33,886 - INFO - final_training 181 -   Total clientes: 164,313
2025-10-16 23:26:33,886 - INFO - final_training 182 -   Positivas: 20,015 (12.18%)
2025-10-16 23:26:33,886 - INFO - final_training 183 -   Umbral utilizado: 0.015
2025-10-16 23:26:33,888 - INFO - final_training 189 - Generando predicciones con top_k=11,750
2025-10-16 23:26:33,910 - INFO - final_training 201 -   Predicciones top_k generadas (K=11,750)
2025-10-16 23:26:33,910 - INFO - final_training 202 -   M√°xima probabilidad: 0.9631
2025-10-16 23:26:33,910 - INFO - final_training 203 -   M√≠nima probabilidad dentro del top_k: 0.0315
2025-10-16 23:26:33,911 - INFO - __main__ 255 - Guardar predicciones
2025-10-16 23:26:34,075 - INFO - output_manager 32 - Predicciones (umbral) guardadas en: predict/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_umbral_20251016_232633.csv
2025-10-16 23:26:34,075 - INFO - output_manager 33 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-16 23:26:34,075 - INFO - output_manager 34 -   Registros: 164,313
2025-10-16 23:26:34,094 - INFO - output_manager 35 -   Primeras filas:
   numero_de_cliente  predict
0          551222730        0
1          551233960        0
2          551287854        0
3          551521732        0
4          551542295        1
2025-10-16 23:26:34,254 - INFO - output_manager 32 - Predicciones (top_k) guardadas en: predict/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_top_k_20251016_232633.csv
2025-10-16 23:26:34,255 - INFO - output_manager 33 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-16 23:26:34,255 - INFO - output_manager 34 -   Registros: 164,313
2025-10-16 23:26:34,260 - INFO - output_manager 35 -   Primeras filas:
        numero_de_cliente  predict
115033          507653834        1
58011          1016783779        1
62988          1469402972        1
162129         1199345235        1
108927          690072207        1
2025-10-16 23:26:34,261 - INFO - __main__ 259 - === RESUMEN FINAL ===
2025-10-16 23:26:34,261 - INFO - __main__ 260 - Entrenamiento final completado exitosamente
2025-10-16 23:26:34,261 - INFO - __main__ 261 - Mejores hiperpar√°metros utilizados: {'num_leaves': 46, 'learning_rate': 0.016377657023274192, 'min_data_in_leaf': 710, 'feature_fraction': 0.2503218637353462, 'bagging_fraction': 0.2352773905721117, 'num_boost_round': 1000}
2025-10-16 23:26:34,261 - INFO - __main__ 262 - Per√≠odos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-16 23:26:34,261 - INFO - __main__ 263 - Per√≠odo de predicci√≥n: 202106
2025-10-16 23:26:34,261 - INFO - __main__ 264 - Archivo de salida: {'umbral': 'predict/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_umbral_20251016_232633.csv', 'top_k': 'predict/TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_top_k_20251016_232633.csv'}
2025-10-16 23:26:34,261 - INFO - __main__ 265 - Log detallado: logs/log_TEST 1 - Modelo Final  - SIN Corregidas NI las Variables sin Drifting_2025-10-16_23-11-16.log
2025-10-16 23:26:34,261 - INFO - __main__ 268 - >>> Ejecuci√≥n finalizada. Revisar logs para mas detalles.
