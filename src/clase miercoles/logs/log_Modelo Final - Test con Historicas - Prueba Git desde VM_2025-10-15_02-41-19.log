2025-10-15 02:41:19,440 - INFO - __main__ 33 - Iniciando programa de optimización con log fechado
2025-10-15 02:41:19,440 - INFO - __main__ 36 - Configuración cargada desde YAML
2025-10-15 02:41:19,440 - INFO - __main__ 37 - STUDY_NAME: Modelo Final - Test con Historicas - Prueba Git desde VM
2025-10-15 02:41:19,440 - INFO - __main__ 38 - DATA_PATH: ../data/competencia_03.csv
2025-10-15 02:41:19,440 - INFO - __main__ 39 - SEMILLA: [555557]
2025-10-15 02:41:19,440 - INFO - __main__ 40 - MES_TRAIN: [2021, 202102]
2025-10-15 02:41:19,440 - INFO - __main__ 41 - MESES_OPTIMIZACION: [2021, 202102, 202103, 202104]
2025-10-15 02:41:19,440 - INFO - __main__ 42 - MES_VALIDACION: 202103
2025-10-15 02:41:19,440 - INFO - __main__ 43 - MES_TEST: 202104
2025-10-15 02:41:19,440 - INFO - __main__ 44 - FINAL_TRAIN: [202101, 202102, 202103, 202104]
2025-10-15 02:41:19,440 - INFO - __main__ 45 - FINAL_PREDIC: 202106
2025-10-15 02:41:19,440 - INFO - __main__ 46 - GANANCIA_ACIERTO: 780000
2025-10-15 02:41:19,440 - INFO - __main__ 47 - COSTO_ESTIMULO: 20000
2025-10-15 02:41:19,440 - INFO - __main__ 48 - UMBRAL: 0.015
2025-10-15 02:41:19,440 - INFO - __main__ 49 - HIPERPARAMETROS: {'num_leaves': {'min': 20, 'max': 200, 'type': 'int'}, 'learning_rate': {'min': 0.005, 'max': 0.06, 'type': 'float'}, 'min_data_in_leaf': {'min': 300, 'max': 1000, 'type': 'int'}, 'feature_fraction': {'min': 0.15, 'max': 0.6, 'type': 'float'}, 'bagging_fraction': {'min': 0.15, 'max': 0.7, 'type': 'float'}, 'num_boost_round': {'min': 300, 'max': 1200, 'type': 'int'}}
2025-10-15 02:41:19,440 - INFO - __main__ 55 - === INICIANDO OPTIMIZACIÓN CON CONFIGURACIÓN YAML ===
2025-10-15 02:41:19,440 - INFO - loader 88 - Cargando dataset desde ../../../datasets/competencia_01_crudo.csv
2025-10-15 02:41:42,390 - INFO - loader 137 - Dataset cargado con 978439 filas y 155 columnas
2025-10-15 02:41:42,783 - INFO - __main__ 62 - Datos cargados: (978439, 155)
2025-10-15 02:41:43,044 - INFO - __name__ 223 - Variables TC_Total generadas. DataFrame resultante con 179 columnas
2025-10-15 02:41:48,829 - INFO - __name__ 29 - Realizando feature engineering con 1 lags para 215 atributos
2025-10-15 02:42:09,517 - INFO - __name__ 60 - Feature engineering completado. DataFrame resultante con 434 columnas
2025-10-15 02:42:09,534 - INFO - __name__ 29 - Realizando feature engineering con 2 lags para 215 atributos
2025-10-15 02:42:50,250 - INFO - __name__ 60 - Feature engineering completado. DataFrame resultante con 864 columnas
2025-10-15 02:42:50,276 - INFO - __name__ 85 - Realizando feature engineering con 1 deltas para 215 atributos
2025-10-15 02:43:25,352 - INFO - __name__ 116 - Feature engineering completado. DataFrame resultante con 1079 columnas
2025-10-15 02:43:25,387 - INFO - __name__ 85 - Realizando feature engineering con 2 deltas para 215 atributos
2025-10-15 02:44:12,198 - INFO - __name__ 116 - Feature engineering completado. DataFrame resultante con 1509 columnas
2025-10-15 02:44:12,237 - INFO - __name__ 85 - Realizando feature engineering con 2 deltas para 215 atributos
2025-10-15 02:47:16,523 - INFO - __name__ 116 - Feature engineering completado. DataFrame resultante con 1939 columnas
2025-10-15 02:48:28,673 - INFO - features 248 - Calculando slope con ventana móvil de 2 meses para 215 atributos
2025-10-15 02:49:59,388 - INFO - features 314 - Slope con ventana móvil calculado. DataFrame resultante con 2154 columnas
2025-10-15 02:49:59,414 - INFO - features 248 - Calculando slope con ventana móvil de 3 meses para 215 atributos
2025-10-15 02:51:55,593 - INFO - features 314 - Slope con ventana móvil calculado. DataFrame resultante con 2369 columnas
2025-10-15 02:51:55,779 - INFO - __main__ 144 - Feature Engineering completado: (978439, 2369)
2025-10-15 02:51:59,401 - INFO - loader 188 - Conversión completada:
2025-10-15 02:51:59,401 - INFO - loader 189 -   Mapeo utilizado: CONTINUA -> 0, BAJA+1 -> 1, BAJA+2 -> 1
2025-10-15 02:51:59,401 - INFO - loader 190 -   Original - CONTINUA: 642840, BAJA+1: 3434, BAJA+2: 3935
2025-10-15 02:51:59,401 - INFO - loader 191 -   Binario - 0: 642840, 1: 7369
2025-10-15 02:51:59,401 - INFO - loader 192 -   Distribución: 1.13% casos positivos
2025-10-15 02:51:59,449 - INFO - __main__ 188 - === EVALUACIÓN EN CONJUNTO DE TEST ===
2025-10-15 02:51:59,450 - INFO - __main__ 239 - === ENTRENAMIENTO FINAL ===
2025-10-15 02:51:59,450 - INFO - __main__ 240 - Preparar datos para entrenamiento final
2025-10-15 02:51:59,450 - INFO - final_training 23 - Preparando datos para entrenamiento final
2025-10-15 02:51:59,450 - INFO - final_training 24 - Períodos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-15 02:51:59,450 - INFO - final_training 25 - Período de predicción: 202106
2025-10-15 02:52:07,673 - INFO - final_training 50 - Features utilizadas: 2368
2025-10-15 02:52:07,675 - INFO - final_training 51 - Distribución del target - 0: 642,840, 1: 7,369
2025-10-15 02:52:07,678 - INFO - __main__ 244 - Entrenar modelo final
2025-10-15 02:52:07,679 - INFO - final_training 67 - Iniciando entrenamiento del modelo final
2025-10-15 02:52:07,679 - INFO - final_training 79 - Parámetros del modelo: {'objective': 'binary', 'metric': 'None', 'random_state': 555557, 'verbose': -1, 'extra_trees': False, 'num_leaves': 46, 'learning_rate': 0.016377657023274192, 'min_data_in_leaf': 710, 'feature_fraction': 0.2503218637353462, 'bagging_fraction': 0.2352773905721117, 'num_boost_round': 1000}
2025-10-15 02:59:08,429 - INFO - __main__ 248 - Generar predicciones finales
2025-10-15 02:59:08,432 - INFO - final_training 159 - Generando predicciones finales
2025-10-15 02:59:14,499 - INFO - final_training 232 - Importancia de las primeras 1000 variables guardada en 'feature_importance/feature_importance_Modelo Final - Test con Historicas - Prueba Git desde VM.csv'
2025-10-15 02:59:14,499 - INFO - final_training 180 - Predicciones con umbral generadas:
2025-10-15 02:59:14,499 - INFO - final_training 181 -   Total clientes: 164,313
2025-10-15 02:59:14,499 - INFO - final_training 182 -   Positivas: 17,579 (10.70%)
2025-10-15 02:59:14,500 - INFO - final_training 183 -   Umbral utilizado: 0.015
2025-10-15 02:59:14,501 - INFO - final_training 189 - Generando predicciones con top_k=11,750
2025-10-15 02:59:14,515 - INFO - final_training 201 -   Predicciones top_k generadas (K=11,750)
2025-10-15 02:59:14,515 - INFO - final_training 202 -   Máxima probabilidad: 0.9711
2025-10-15 02:59:14,515 - INFO - final_training 203 -   Mínima probabilidad dentro del top_k: 0.0257
2025-10-15 02:59:14,515 - INFO - __main__ 252 - Guardar predicciones
2025-10-15 02:59:14,610 - INFO - output_manager 32 - Predicciones (umbral) guardadas en: predict/Modelo Final - Test con Historicas - Prueba Git desde VM_umbral_20251015_025914.csv
2025-10-15 02:59:14,610 - INFO - output_manager 33 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-15 02:59:14,610 - INFO - output_manager 34 -   Registros: 164,313
2025-10-15 02:59:14,614 - INFO - output_manager 35 -   Primeras filas:
   numero_de_cliente  predict
0          249350768        0
1          249432306        0
2          249565688        0
3          249596175        0
4          249695645        1
2025-10-15 02:59:14,708 - INFO - output_manager 32 - Predicciones (top_k) guardadas en: predict/Modelo Final - Test con Historicas - Prueba Git desde VM_top_k_20251015_025914.csv
2025-10-15 02:59:14,708 - INFO - output_manager 33 -   Columnas: ['numero_de_cliente', 'predict']
2025-10-15 02:59:14,708 - INFO - output_manager 34 -   Registros: 164,313
2025-10-15 02:59:14,711 - INFO - output_manager 35 -   Primeras filas:
        numero_de_cliente  predict
115726          507653834        1
163169         1303652009        1
10520           469357652        1
86293           957781338        1
161961         1122340744        1
2025-10-15 02:59:14,711 - INFO - __main__ 256 - === RESUMEN FINAL ===
2025-10-15 02:59:14,711 - INFO - __main__ 257 - Entrenamiento final completado exitosamente
2025-10-15 02:59:14,711 - INFO - __main__ 258 - Mejores hiperparámetros utilizados: {'num_leaves': 46, 'learning_rate': 0.016377657023274192, 'min_data_in_leaf': 710, 'feature_fraction': 0.2503218637353462, 'bagging_fraction': 0.2352773905721117, 'num_boost_round': 1000}
2025-10-15 02:59:14,711 - INFO - __main__ 259 - Períodos de entrenamiento: [202101, 202102, 202103, 202104]
2025-10-15 02:59:14,711 - INFO - __main__ 260 - Período de predicción: 202106
2025-10-15 02:59:14,711 - INFO - __main__ 261 - Archivo de salida: {'umbral': 'predict/Modelo Final - Test con Historicas - Prueba Git desde VM_umbral_20251015_025914.csv', 'top_k': 'predict/Modelo Final - Test con Historicas - Prueba Git desde VM_top_k_20251015_025914.csv'}
2025-10-15 02:59:14,711 - INFO - __main__ 262 - Log detallado: logs/log_Modelo Final - Test con Historicas - Prueba Git desde VM_2025-10-15_02-41-19.log
2025-10-15 02:59:14,711 - INFO - __main__ 265 - >>> Ejecución finalizada. Revisar logs para mas detalles.
